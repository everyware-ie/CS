# ERD와 정규화 과정, 이상현상

## ERD

데이터베이스를 구축할 때 가장 기초적인 뼈대 역할을 하고 릴레이션 간의 관계들을 정의한 것

- ERD는 시스템의 요구 사항을 기반으로 작성되며 이 ERD를 기반으로 데이터베이스를 구축한
- 데이터베이스를 구축한 이후에도 디버깅 또는 비즈니스 프로세스 재설계가 필요한 경우에 설계도 역할을 담당하기도 함
- ERD 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용하다는 장점
- 비정형 데이터를 충분히 표현할 수 없다는 단점

## 정규화 과정

정규화 과정은 **릴레이션 간의 잘못된 종속 관계**로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나 저장공간을 효율적으로 사용하기 위해 **릴레이션을 여러 개로 분리하는 과정**

### 제1정규형

릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자 값(atomic value)만으로 구성되어야 함

- 릴레이션의 속성 값 중에서 **한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있으면 안 됨**

<img src = https://github.com/everyware-ie/CS/assets/102847513/4a4896da-336a-4a61-8aa0-c95bcae68802 width = 50%>

**1정규화 하면**

<img src = https://github.com/everyware-ie/CS/assets/102847513/f1cb5628-05e3-4b97-9933-93c6d24dca53 width = 50%>

### 제2정규형

제2정규형은 릴레이션이 제1정규형이며 부분 함수의 종속성을 제거한 형태

- 부분 함수의 종속성 제거
    - 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속적인 것을 말함
- 릴레이션을 분해할 때 동등한 릴레이션으로 분해해야 함
- 정보 손실이 발생하지 않는 무손실 분해로 분해되어야 함

<img src = https://github.com/everyware-ie/CS/assets/102847513/03c83eee-bcc1-478d-b3fc-f88ef9b2e73e width = 50%>

### 제3정규형

제2정규형이고 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 형테

- 본키에 속하지 않은 모든 속성이 기본키에 이행적 함수 종속이 아닐 때
- 이행 종속성이란 A->B, B->C 일 때 A->C 가 성립하면 이행 종속

<img src = https://github.com/everyware-ie/CS/assets/102847513/2939774e-cee0-40b0-9c9e-a3fd68b18006 width = 50%>

**3정규화 적용**

<img src = https://github.com/everyware-ie/CS/assets/102847513/5a6ca35b-dd8a-4f0b-a8f4-d9f03cf60430 width = 50%>

## 정규화 이상현상

### 삽입 이상(insertion anomalies)

원하지 않는 자료가 삽입된다든지, 삽입하는데 자료가 부족해 삽입이 되지 않아 발생하는 문제점을

### 삭제 이상(deletion anomalies)

하나의 자료만 삭제하고 싶지만, 그 자료가 포함된 튜플 전체가 삭제됨으로 원하지 않는 정보 손실이 발생하는 문제

### 수정(갱신)이상(modification anomalies)

정확하지 않거나 일부의 튜플만 갱신되어 정보가 모호해지거나 일관성이 없어져 정확한 정보 파악이 되지 않는 문제점
