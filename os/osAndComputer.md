# 운영체제란 무엇인지 설명해 주세요.

운영체제(OS, Operating System)는 컴퓨터 시스템의 핵심 소프트웨어로, 컴퓨터 하드웨어와 응용 프로그램 간의 상호작용을 관리하고 제어하는 역할을 한다

목적은 사용자와 하드웨어 사이의 인터페이스를 제공해 효율적으로 응용 프로그램이 동작하도록 지원하고, 시스템 자원을 효율적으로 관리하여 응용 프로그램이 원활하게 동작할 수 있도록 한다

운영체제의 코어(핵심) 부분을 커널이라고 하는데, 일반적으로는 커널에 여러가지 기능*라이브러리, 시스템 프로그램 등등)이 추가된 상태를 통칭해서 운영체제라고 한다.

# 운영체제의 역할에 대해 2가지 말씀해 주세요.

- 자원관리
    - 컴퓨터 시스템의 하드웨어 자원을 효율적으로 관리하는 역할을 한다. CPU(중앙처리장치), 메모리, 저장 장치, 입출력 장치 등 하드웨어의 자원을 할당하고 관리하여 여러 응용 프로그램이 동시에 실행딜 수 있도록 한다
- 메모리 관리
    - 운영체제는 컴퓨터의 메모리를 효율적으로 관리하여 응용 프로그램이 필요로하는 메모리 공간을 할당한다. 여기서 메모리의 할당과 해제, 가상 메모리 관리 등을 포함한다.
- 프로세스 관리
    - 운영체제는 실행 중인 응용 프로그램인 프로세스를 관리한다. 여기서 프로세스의 생성, 실행, 일시 정지, 시스템 중지 등의 작업을 제어하며, 여러 프로세스 간의 자원 공유와 협력을 관리한다.
- 디스크 및 파일 시스템 관리
    - 디스크와 파일 시스템을 관리하여 파일의 생성, 삭제, 복사, 이동 등의 작업을 처리한다. 파일 시스템은 데이터의 영구적인 저장과 접근을 제공하여 사용자 및 응용 프로그램이 데이터를 쉽게 관리할 수 있도록 한다.
- 입출력 관리
    - 운영체제는 입출력 장치와의 상호작용을 관리한다. 사용자와 응용 프로그램이 키보드, 마우스, 디스플레이, 프린터 등관의 통신을 할 수 있도록 지원하며, 입출력 장치의 성능을 최적화 한다.
- 사용자 인터페이스
    - 사용자와 컴퓨터 간의 상호작용을 지원하는 사용자 인터페이스를 제공한다. 텍스트 기반의 터미널 환경(CLI)과 그래픽 사용자 환경(GUI)을 통해 사용자가 컴퓨터를 조작할 수 있도록 한다.
- 네트워킹
    - 컴퓨터 네트워크를 관리하고, 네트워크 프로토콜을 지원하여 컴퓨터 간의 통신을 가능하게 한다. 인터넷 연결, 데이터 전송, 네트워크 보안 등을 관리한다.
- 오류 처리
    - 시스템 내부 또는 외부에서 발생하는 오류와 예외 사항을 처리한다. 여기서 프로세스의 비정상 종류, 메모리 오버플로우, 입출력 오류 등을 감지하고 처리하여 시스템의 안정성과 신뢰성을 유지한다.
- 시스템 보안
    - 시그템의 보안을 유지하기 위해 접근 제어, 사용자 인증, 암호화 등의 기능을 제공한다. 여기서 불법적인 접근과 데이터 유출 등으로부터 시스템을 보호하고 안전한 환경을 제공한다.

# 시스템 콜에 대해 설명해 주세요.

시스템 호출은 운영 체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스이다.

사용자 프로그램이 디스크 파일을 접근하거나 화면에 결과를 출력하는 등의 작업이 필요한 경우, 즉 사용자 프로그램이 특권 명령을 수행하는 경우, 운영체제에게 특권 명령의 대행을 요청하는 것이 시스템 콜이다.

OS 다양한 서비스 들을 수행하기 위해 하드웨어를 직접적으로 관리한다. 이와 반면 응용 프로그램은 OS가 제공하는 인터페이스를 통해서만 자원을 사용할 수 있다. OS가 제공하는 인러한 인터페이스를 ‘시스템 콜’이라고 한다.

- 통상적으로 시스템 콜은 여러 종류의 기능으로 나누어진다
- 각 시스템 콜에는 번호가 할당되고 시스템 콜 인터페이스는 시스템 콜 번호와 시스템 콜 핸들러 함수 주소로 구성되는 시스템 콜 테이블을 유지한다.
- 운영체제는 자신의 커널 영역에서 해당 인덱스가 가리키는 주소에 저장되어 있는 루틴을 수행한다.
- 작업이 완료되면 CPU에게 인터럽트를 발생시켜 수행이 완료 되었음을 알린다.

### 시스템 콜이 필요한 이유

![image](https://github.com/everyware-ie/CS/assets/88030920/d97df8d6-d7b7-4634-8501-551847072964)

우리가 일반적으로 사용하는 프로그램은 ‘응용 프로그램’ 이다. 유저레벨의 프로그램은 유저레벨의 함수들만으로는 많은 기능을 구현하기 힘들기 때문에, 커널의 도움을 반드시 받아야 한다. 이러한 작업은 응용프로그램으로 대표되는 유저 프로세스에서 유저모드에서는 수행할 수 없다. 반드시 커널에 관련된 것은 커널모드로 전환한 후에야, 해당 작업을 수행할 권한이 생긴다.

### **시스템콜 종류**

시스템콜은 크게 6가지로 분류할 수 있다.

1. **프로세스 제어 (Process Control)**
    - 끝내기(exit), 중지 (abort)
    - 적재(load), 실행(execute)
    - 프로세스 생성(create process) - fork
    - 프로세스 속성 획득과 속성 설정
    - 시간 대기 (wait time)
    - 사건 대기 (wait event)
    - 사건을 알림 (signal event)
    - 메모리 할당 및 해제
2. **파일 조작 (File Manipulation)**
    - 파일 생성 / 삭제 (create, delete)
    - 열기 / 닫기 / 읽기 / 쓰기 (open, close, read, wirte)
    - 위치 변경 (reposition)
    - 파일 속성 획득 및 설정 (get file attribute, set file attribute)
3. **장치 관리 (Device Manipulation)**
    - 하드웨어의 제어와 상태 정보를 얻음 (ioctl)
    - 장치를 요구(request device), 장치를 방출 (relese device)
    - 읽기 (read), 쓰기(write), 위치 변경
    - 장치 속성 획득 및 설정
    - 장치의 논리적 부착 및 분리
4. **정보 유지 (Information Maintenance)**
    - getpid(), alarm(), sleep()
    - 시간과 날짜의 설정과 획득 (time)
    - 시스템 데이터의 설정과 획득 (date)
    - 프로세스 파일, 장치 속성의 획득 및 설정
5. **통신 (Communication)**
    - pipe(), shm_open(), mmap()
    - 통신 연결의 생성, 제거
    - 메시지의 송신, 수신
    - 상태 정보 전달
    - 원격 장치의 부착 및 분리
6. **보호 (Protection)**
    - chmod()
    - umask()
    - chown()

# 커널의 역할이 무엇인지 설명해 주세요.

### **커널 (kernel) 이란?**

컴퓨터와 전원을 켜면 운영체제는 이와 동시에 수행된다. 소프트웨어가 컴퓨터 시스템에서 수행되기 위해서는 메모리에 그 프로그램이 올라가 있어야 한다. 마찬가지로 운영체제 자체도 소프트웨어로서 전원이 켜짐과 동시에 메모리에 올라가야한다.

하지만 운영체제처럼 규모가 큰 프로그램이 모두 메모리에 올라가면 한정된 메모리 공간이 낭비가 심할 것이다. 따라서 **운영체제 중 항상 필요한 부분만을 전원이 켜짐과 동시에 메모리에 올려놓고, 그렇지 않은 부분은 필요할 때 메모리에 올려서 사용하게 된다. 이때 메모리에 상주하는 운영체제의 부분을 kernel(커널)이라고 한다.**

### 역할

커널은 다음과 같은 4가지 기능을 수행합니다.

1. **메모리 관리:** 메모리가 어디에서 무엇을 저장하는 데 얼마나 사용되는지를 추적합니다.
2. **프로세스 관리:** 어느 프로세스가 중앙 처리 장치(CPU)를 언제 얼마나 오랫동안 사용할지를 결정합니다.
3. **장치 드라이버:** 하드웨어와 프로세스 사이에서 중재자/인터프리터의 역할을 수행합니다.
4. **시스템 호출 및 보안:** 프로세스의 서비스 요청을 수신합니다.

# DMA 컨트롤러 (Direct Memory Access Controller)에 대해 설명해 주세요.

### DMA 정의

- 메모리 버퍼, 포인터, 카운터를 사용하여 장치 제어기가 CPU이 도움없이 DMA 컨트롤러를 이용하여 데이터를 직접 메모리로 전송하는 입출력 방식
- CPU는 상태, 제어정보만을 교환하고 데이터 전송은 I/O와 메모리간에 직접교환
- DMA 컨트롤러가 버스를 제어하고 I/O와 메모리가 정보를 집적 전송
- 중앙처리장치에게 PIO작업을 할당하지 않고 DMA라는 특수 프로세서에게 위임하여 메모리와 직접 데이터를 전송할 수 있게 하는 방법
- 특정한 HW 시스템이 CPU와 독립적으로 주 시스템 메모리에 Access 할 수 있도록 하는 컴퓨터 시스템의 기능이다
- CPU는 상태, 제어정보만을 교환하고 직접적인 데이터 전송은 DMA Controller가 버스를 제어하고 I/O와 메모리간에 교환한다

### DMA 필요성

- 고속의 I/O 장치의 경우 인터럽트로 CPU의 실제 프로세스 작업 시간 감소
- 디스크 같은 많은 데이터를 입/출력하는 장치를 위해 CPU가 매번 전송을 제어하는 방법의 비효율성
- 인터럽트 방식이 프로그램에 의한 입출력 방식보다 효율적이지만 입출력을 위한 상태, 제어정보, 데이터 전송을 위해서 능동적인 CPU 개입이 필요 → 오버헤드 발생

### DMA 특징

- 프로그램 수행 중 인터럽트의 발생 횟수 최소화 및 시스템 효율성 증대
- CPU는 DMA 컨트롤러와 상태정보 및 제어정보만 전송
- CPU의 개입 없이 입출력장치와 주 기억장치와의 데이터 직접 전송 가능

### 종류

- PIO(Programed I/O) : Port를 이용한 데이터 전송, 프로그램에 의해 제어, I/O 완료될때 까지 CPU Stall된다.
- Interrupt Driven I/O : I/O 인터페이스가 HW 장치에 Status를 요청, Ready Status 일때 인터럽트가 구동되어 CPU에 I/O 요청한다. 따라서, Context Switching 과정을 통해 인터럽트 서비스 루틴을 수행한다.
- DMA : CPU의 큰 개입없이 I/O 장치와 Memory 사이의 데이터 전송을 담당하는 Controller를 사용한다. 따라서 시스템 버스에 Controller 모듈이 추가된다. 해당 모듈은 한번에 1 Word씩 모든 데이터 블록을 전송한다. 전송이 시작되거나 완료되면 CPU에게 인터럽트 구동
- Channel I/O : DMA 개념을 확장, I/O만을 위한 전용 처리 장치, CPU처럼 독자적으로 메모리에 저장된 명령어를 처리할 수 있다. I/O Channel은 CPU의 개입없이 I/O를 수행한다.

### 동작 방식

![image](https://github.com/everyware-ie/CS/assets/88030920/eadcc022-a564-4e61-8f45-b279edca339d)

1. I/O 인터페이스가 DMA Controller에게 DMA 서비스를 요청
2. CPU의 HOLD Pin에 Request가 전송되어 시스템 버스에 대한 제어를 DMA가 획득 (Active High)
3. CPU의 HLDA(Hold Acknowledge) Pin으로부터 DMAC에 Bus grant가 리턴됨 (Active High)
4. DMAC는 Address bus에 Address Register의 Contents를 적재한다
5. DMAC는 I/O Interface에게 데이터를 데이터버스에 적재하도록 DMA Acknowledgement를 전송한다
6. Data Byte가 Address Bus에 의해 식별된 메모리 위치로 전송된다.
7. I/O Interface는 데이터를 지속적으로 전송유지 한다 (Latch)
8. Bus Request 가 Drop되어 HOLD가 Low 상태가 되어 DMAC는 Bus에 대한 사용권을 돌려준다.
9. BUS Grant가 Drop되어 HLDA가 Low 상태가 된다
10. 이후, Address Register가 1 증가되고, Byte Count는 1 감소된다
11. Byte Count가 0이 아니면 Step 1로, 0이면 정지